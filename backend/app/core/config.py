"""
Конфигурация приложения
Загружает настройки из переменных окружения (.env файл)
"""

from pydantic_settings import BaseSettings
from typing import Optional
import os


class Settings(BaseSettings):
    """Настройки приложения"""

    # ========================================================================
    # ПРИЛОЖЕНИЕ
    # ========================================================================
    APP_NAME: str = "Britannica Labels"
    APP_VERSION: str = "1.0.0"
    ENVIRONMENT: str = "development"  # development | production
    DEBUG: bool = True

    # ========================================================================
    # СЕРВЕР
    # ========================================================================
    HOST: str = "0.0.0.0"
    PORT: int = 8000

    # ========================================================================
    # БАЗА ДАННЫХ
    # ========================================================================
    DATABASE_URL: str = "sqlite:///./britannica.sqlite"
    DISHES_DB_PATH: str = "/app/dishes_full.sqlite"  # Мастер-база блюд с иерархией (монтируется в docker)

    # ========================================================================
    # STORE HOUSE 5 (API для загрузки блюд)
    # ========================================================================
    SH5_URL: str
    SH5_USER: str
    SH5_PASS: str
    SH5_SYNC_INTERVAL: int = 24  # Часы

    # ========================================================================
    # ПРИНТЕР
    # ========================================================================
    PRINTER_IP: str = "192.168.1.10"
    PRINTER_PORT: int = 9100
    PRINTER_TIMEOUT: int = 5

    # ========================================================================
    # БЕЗОПАСНОСТЬ
    # ========================================================================
    SECRET_KEY: str
    SESSION_LIFETIME_HOURS: int = 8

    # ========================================================================
    # TIMEZONE
    # ========================================================================
    TIMEZONE: str = "Europe/Kiev"  # GMT+2

    # ========================================================================
    # ЛОГИРОВАНИЕ
    # ========================================================================
    LOG_LEVEL: str = "INFO"
    LOG_FILE: Optional[str] = None

    # ========================================================================
    # ЭТИКЕТКИ (по умолчанию)
    # ========================================================================
    DEFAULT_SHELF_LIFE_HOURS: int = 6
    DEFAULT_PAPER_WIDTH: int = 60  # мм
    DEFAULT_PAPER_HEIGHT: int = 60  # мм
    DEFAULT_PAPER_GAP: int = 2  # мм

    # ========================================================================
    # АРХИВАЦИЯ
    # ========================================================================
    ARCHIVE_ORDERS_HOURS: int = 48

    class Config:
        env_file = ".env"
        env_file_encoding = "utf-8"
        case_sensitive = True


# Создаём глобальный экземпляр настроек
settings = Settings()
